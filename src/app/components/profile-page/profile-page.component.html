<div class="container">
  <app-notification></app-notification>
  <mat-tab-group>
    <mat-tab label="Профіль">
      <form class="card" [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="profile" (click)="onEdit()" *ngIf="this.currentUser.userName && this.currentUser.age">
          <h2 class="card-title">Профайл</h2>
          <label> Username:</label><br />
          <span><b>{{ this.currentUser.userName }}</b></span><br />
          <label> Імейл:</label><br />
          <span><b>{{ this.currentUser.email }}</b></span><br />

          <label> Вік:</label><br />
          <span><b>{{ this.currentUser.age }}</b></span>
          <div class="card-action">
            <br />
            <button type="submit" class="modal-action">Редагувати</button>
            <br />
          </div>
        </div>
        <div class="card-content" *ngIf="!this.currentUser.userName || !this.currentUser.age">
          <h2 class="card-title">Профайл</h2>
          <div class="input-field">
            <label for="text">Ім'я:</label><br />
            <input [placeholder]="'Імя' | titlecase" [formControlName]="userProperty.NAME" [id]="userProperty.NAME"
                   type="text" /><br />
            <span class="red-text"
                  *ngIf="form.get(userProperty.NAME)?.invalid && form.get(userProperty.NAME)?.touched">
          Ім'я дуже коротке!
        </span>
          </div>
          <div class="input-field">
            <label [for]="userProperty.EMAIL">Імейл:</label><br />
            <input [placeholder]="'імейл' | titlecase" [id]="userProperty.EMAIL" [value]="enteredEmail"
                   [type]="userProperty.EMAIL" disabled/><br />
          </div>
          <div class="input-field">
            <label [for]="userProperty.AGE">Вік:</label><br />
            <input [placeholder]="'Вік' | titlecase" [formControlName]="userProperty.AGE" [id]="userProperty.AGE"
                   type="number" /><br />
            <span class="red-text"
                  *ngIf="form.get(userProperty.AGE)?.invalid && form.get(userProperty.AGE)?.touched">
          Введіть вік!
        </span>
          </div>
          <div class="card-action">
            <br />
            <button type="submit" class="modal-action">Зберегти</button>
            <br>
            <span class="red-text" *ngIf="notValid">Введіть дані!</span>
          </div>
        </div>
      </form>
    </mat-tab>
    <mat-tab label="Заяви">
      <h1>Заяви на оренду складського приміщення</h1>

      <button style="margin: 10px" (click)="createParcel()">Створити заяву</button>

      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

        <!--- Note that these columns can be defined in any order.
              The actual rendered columns are set as a property on the row definition" -->

        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef> Імейл </th>
          <td mat-cell *matCellDef="let element"> {{element?.email}} </td>
        </ng-container>
        <!-- Position Column -->
        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef> Тип </th>
          <td mat-cell *matCellDef="let element"> {{element?.type}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="square">
          <th mat-header-cell *matHeaderCellDef> Площа м2 </th>
          <td mat-cell *matCellDef="let element"> {{element?.square}} </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="count">
          <th mat-header-cell *matHeaderCellDef> Термін </th>
          <td mat-cell *matCellDef="let element"> {{element?.count}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Статус </th>
          <td mat-cell *matCellDef="let element">
            <div [ngClass]="{'accept': element?.status, 'decline': !element?.status}" style="width: 20px;
    height: 20px;
    border-radius: 50%;"></div>
          </td>
        </ng-container>

        <ng-container matColumnDef="edit">
          <th mat-header-cell *matHeaderCellDef> </th>
          <td mat-cell *matCellDef="let element">
            <button *ngIf="!element.status && role === 'user'" style="width: 80px; padding: 5px; margin: 5px;background: orange" (click)="edit(element)">Редагувати</button>
            <button *ngIf="role === 'Administrator'" style="width: 80px; padding: 5px; margin: 5px;background: orange" (click)="edit(element)">Редагувати</button>
          </td>
        </ng-container>
        <ng-container matColumnDef="remove">
          <th mat-header-cell *matHeaderCellDef> </th>
          <td mat-cell *matCellDef="let element">
            <button *ngIf="!element.status && role === 'user'" style="width: 80px; padding: 5px; margin: 5px;background: red" (click)="remove(element)">Видалити</button>
            <button *ngIf="role === 'Administrator'" style="width: 80px; padding: 5px; margin: 5px;background: red" (click)="remove(element)">Видалити</button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-tab>
  </mat-tab-group>
</div>
